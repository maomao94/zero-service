# IEC-104 æ¶ˆæ¯å¯¹æ¥æ–‡æ¡£

---

## 0. iec104 æ¨¡å—æ¶æ„ä¸è®¾è®¡

### 0.1 æ ¸å¿ƒåŠŸèƒ½

- **IEC 60870-5-104 åè®®æ”¯æŒ**ï¼šå®ç°å®Œæ•´çš„IEC 104ä¸»ç«™åŠŸèƒ½ï¼Œæ”¯æŒä¸å¤šä¸ªå­ç«™é€šä¿¡
- **åŒåè®®æ¶ˆæ¯æ¨é€**ï¼šåŒæ—¶æ”¯æŒKafkaå’ŒMQTTæ¶ˆæ¯æ¨é€ï¼Œå¯çµæ´»é…ç½®
- **åŠ¨æ€Topicç”Ÿæˆ**ï¼šåŸºäºé…ç½®è§„åˆ™å’Œæ¶ˆæ¯å…ƒæ•°æ®åŠ¨æ€ç”Ÿæˆæ¨é€Topic
- **é…ç½®é©±åŠ¨**ï¼šå…¨é…ç½®åŒ–è®¾è®¡ï¼Œæ”¯æŒçµæ´»éƒ¨ç½²å’Œæ‰©å±•

### 0.2 æ¶æ„è®¾è®¡

**åˆ†å±‚æ¶æ„**ï¼š
1. **åè®®å¤„ç†å±‚**ï¼šè´Ÿè´£IEC 104åè®®çš„è§£æã€ç¼–ç å’Œé€šä¿¡ç®¡ç†
2. **æ ¸å¿ƒå¤„ç†å±‚**ï¼šå®ç°æ¶ˆæ¯è·¯ç”±ã€æ ¼å¼è½¬æ¢å’Œä¸šåŠ¡é€»è¾‘å¤„ç†
3. **è¾“å‡ºå±‚**ï¼šæ”¯æŒKafkaå’ŒMQTTåŒåè®®æ¶ˆæ¯æ¨é€ï¼Œå¯ç‹¬ç«‹é…ç½®

**æ¶æ„ç‰¹æ€§**ï¼š
- æ¨¡å—åŒ–è®¾è®¡ï¼Œå„å±‚èŒè´£æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- é…ç½®é©±åŠ¨ï¼Œæ”¯æŒçµæ´»éƒ¨ç½²å’Œå¤šç¯å¢ƒé€‚é…
- é«˜æ€§èƒ½è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘æ¶ˆæ¯å¤„ç†

### 0.3 å¤šåè®®æ”¯æŒè®¾è®¡

#### Kafkaé…ç½®
- æ”¯æŒå¤šä¸ªKafkaé›†ç¾¤é…ç½®
- å¯é…ç½®Topicè·¯ç”±è§„åˆ™
- æ”¯æŒæ¶ˆæ¯åˆ†åŒºå’Œæ¶ˆè´¹ç»„ç®¡ç†

#### MQTTé…ç½®
- æ”¯æŒå¤šä¸ªMQTTæœåŠ¡å™¨è¿æ¥
- æ”¯æŒå¤šTopicæ¨é€ï¼Œæ¯ä¸ªæ¶ˆæ¯å¯æ¨é€è‡³å¤šä¸ªTopic
- æ”¯æŒåŠ¨æ€Topicç”Ÿæˆï¼ŒåŸºäºæ¶ˆæ¯å†…å®¹å’Œå…ƒæ•°æ®

### 0.4 åŠ¨æ€Topicç”Ÿæˆæœºåˆ¶

**è®¾è®¡æ€è·¯**ï¼šåŸºäºé…ç½®çš„Topicæ¨¡æ¿ï¼Œç»“åˆæ¶ˆæ¯å­—æ®µå’Œå…ƒæ•°æ®åŠ¨æ€ç”Ÿæˆå®é™…æ¨é€Topicã€‚

**æ”¯æŒçš„å ä½ç¬¦**ï¼š
- å›ºå®šå­—æ®µï¼š`{typeId}`, `{asdu}`, `{coa}`, `{host}`, `{port}`
- å…ƒæ•°æ®å­—æ®µï¼š`{key}`ï¼ˆæ”¯æŒä»»æ„å…ƒæ•°æ®é”®å€¼å¯¹ï¼‰

**ç¤ºä¾‹é…ç½®**ï¼š
```yaml
mqtt:
  topic:
    - "iec104/{typeId}/{asdu}"
    - "site/{metaData.siteId}/data"
```

### 0.5 é…ç½®ç¤ºä¾‹

```yaml
Name: ieccaller
Host: 0.0.0.0
Port: 8888

Kafka:
  Brokers:
    - 127.0.0.1:9092
  Topic: iec104-data

Mqtt:
  Host: 127.0.0.1
  Port: 1883
  Username: admin
  Password: password
  Topic:
    - "iec104/{typeId}/{asdu}"
    - "site/{metaData.siteId}/data"
```

### 0.6 æ¶æ„æ¼”è¿›

æœ¬æ¬¡é‡æ„ä¸»è¦å®ç°äº†ä»¥ä¸‹æ¶æ„å‡çº§ï¼š
1. å¼•å…¥åŒåè®®æ”¯æŒï¼ŒåŒæ—¶æ”¯æŒKafkaå’ŒMQTTæ¶ˆæ¯æ¨é€
2. å®ç°åŠ¨æ€Topicç”Ÿæˆæœºåˆ¶ï¼Œæ”¯æŒåŸºäºé…ç½®å’Œå…ƒæ•°æ®çš„çµæ´»è·¯ç”±
3. å®Œå–„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒå…¨é…ç½®åŒ–éƒ¨ç½²

### 0.7 å…¸å‹åº”ç”¨åœºæ™¯

- **æ™ºèƒ½ç”µç½‘ç›‘æ§**ï¼šå®æ—¶é‡‡é›†ç”µç½‘è®¾å¤‡æ•°æ®ï¼Œé€šè¿‡åŒåè®®æ¨é€è‡³æ•°æ®å¹³å°
- **å·¥ä¸šè‡ªåŠ¨åŒ–**ï¼šå®ç°å·¥ä¸šç°åœºè®¾å¤‡çš„è¿œç¨‹ç›‘æ§å’Œæ§åˆ¶
- **æ–°èƒ½æºç›‘æ§**ï¼šé‡‡é›†å…‰ä¼ã€é£ç”µç­‰æ–°èƒ½æºè®¾å¤‡æ•°æ®ï¼Œæ”¯æŒå¤šåè®®æ•°æ®ä¸ŠæŠ¥
- **æ™ºèƒ½æ¥¼å®‡**ï¼šå®ç°æ¥¼å®‡è®¾å¤‡çš„é›†ä¸­ç›‘æ§å’Œç®¡ç†
- **æ™ºæ…§åŸå¸‚**ï¼šæ”¯æŒåŸå¸‚åŸºç¡€è®¾æ–½çš„å®æ—¶ç›‘æ§å’Œæ•°æ®åˆ†æ

#### æ¶æ„ç‰¹ç‚¹

1. **åˆ†å±‚è®¾è®¡**ï¼šæ ¸å¿ƒå¤„ç†å±‚ä¸è¾“å‡ºå±‚åˆ†ç¦»ï¼Œä¾¿äºæ‰©å±•æ–°çš„è¾“å‡ºåè®®
2. **å¤šåè®®æ”¯æŒ**ï¼šåŒæ—¶æ”¯æŒ Kafka å’Œ MQTT è¾“å‡ºï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
3. **é«˜æ€§èƒ½**ï¼šé‡‡ç”¨è¿æ¥æ± ç­‰æŠ€æœ¯ä¼˜åŒ–æ€§èƒ½
4. **å¯é æ€§**ï¼šæ”¯æŒè‡ªåŠ¨é‡è¿ã€æ¶ˆæ¯ç¡®è®¤æœºåˆ¶
5. **æ˜“æ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ·»åŠ æ–°çš„åè®®æ”¯æŒ

---

## 1. æ¶ˆæ¯æ ¼å¼è§„èŒƒ

### åŸºç¡€åè®®

- **ä¼ è¾“åè®®**ï¼šIEC 60870-5-104
- **ä¼ è¾“è½½ä½“**ï¼šKafka/MQTT Topicï¼ˆå…·ä½“åç§°åå•†çº¦å®šï¼‰
- **æ•°æ®æ ¼å¼**ï¼šJSON
- **ç¼–ç æ ¼å¼**ï¼šUTF-8

### æ¶ˆæ¯ç»“æ„

```json
{
  "msgId": "æ¶ˆæ¯id",
  "host": "ä»ç«™ ip",
  "port": 2404,
  "asdu": "M_SP_NA_1",
  "typeId": 1,
  "dataType": 0,
  "coa": 1001,
  "body": {
    /* ä¿¡æ¯ä½“ç»“æ„ï¼ˆä¸åŒtypeIdå¯¹åº”ä¸åŒç»“æ„ï¼‰ */
  },
  "time": "2023-10-01 14:30:00.000000",
  "metaData": {
    "key": "åº”ç”¨ID",
    "array": [
      "1",
      "2"
    ]
  }
}
```

| å­—æ®µ       | ç±»å‹     | è¯´æ˜                                               |
|----------|--------|--------------------------------------------------|
| msgId    | String | æ¶ˆæ¯id                                             |
| host     | String | é‡‡é›†è®¾å¤‡åœ°å€                                           |
| port     | int    | é‡‡é›†è®¾å¤‡ç«¯å£å·                                          |
| asdu     | String | ASDUç±»å‹åç§°                                         |
| typeId   | int    | ASDUç±»å‹æ ‡è¯†ç¬¦                                        |
| dataType | int    | ä¿¡æ¯ä½“ç±»å‹æ ‡è¯†ç¬¦                                         |
| coa      | uint   | å…¬å…±åœ°å€ï¼ˆèŒƒå›´ï¼š1-65534ï¼Œå…¨å±€åœ°å€65535ä¿ç•™ï¼‰                     |
| body     | Object | ä¿¡æ¯ä½“å¯¹è±¡ï¼ˆç»“æ„éštypeIdå˜åŒ–ï¼‰                               |
| time     | String | æ¶ˆæ¯æ¨é€æ—¶é—´æˆ³ï¼ˆæ ¼å¼ï¼š`YYYY-MM-DD HH:mm:ss.SSSSSS`ï¼ŒUTC+8æ—¶åŒºï¼‰ |
| metaData | Object | åº”ç”¨çº§å…ƒæ•°æ®ï¼ˆå¦‚ï¼šåº”ç”¨IDã€ç”¨æˆ·ä¿¡æ¯ã€åœºç«™ä¿¡æ¯ç­‰ï¼‰                        |

---

## 2. å…¨é‡ASDUç±»å‹æ˜ å°„è¡¨

| DataType | TypeId | ASDUç±»å‹    | Bodyç»“æ„ä½“                                      | åº”ç”¨åœºæ™¯è¯´æ˜                        |
|----------|--------|-----------|----------------------------------------------|-------------------------------|
| 0        | 1      | M_SP_NA_1 | `SinglePointInfo`                            | å•ç‚¹é¥ä¿¡ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                    |
| 0        | 2      | M_SP_TA_1 | `SinglePointInfo`                            | å•ç‚¹é¥ä¿¡ï¼ˆå¸¦æ—¶æ ‡ï¼‰                     |
| 0        | 30     | M_SP_TB_1 | `SinglePointInfo`                            | å•ç‚¹é¥ä¿¡ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰            |
| 1        | 3      | M_DP_NA_1 | `DoublePointInfo`                            | åŒç‚¹é¥ä¿¡ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                    |
| 1        | 4      | M_DP_TA_1 | `DoublePointInfo`                            | åŒç‚¹é¥ä¿¡ï¼ˆå¸¦æ—¶æ ‡ï¼‰                     |
| 1        | 31     | M_DP_TB_1 | `DoublePointInfo`                            | åŒç‚¹é¥ä¿¡ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰            |
| 2        | 11     | M_ME_NB_1 | `MeasuredValueScaledInfo`                    | æ ‡åº¦åŒ–é¥æµ‹å€¼ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                  |
| 2        | 12     | M_ME_TB_1 | `MeasuredValueScaledInfo`                    | æ ‡åº¦åŒ–é¥æµ‹å€¼ï¼ˆå¸¦æ—¶æ ‡ï¼‰                   |
| 2        | 35     | M_ME_TE_1 | `MeasuredValueScaledInfo`                    | æ ‡åº¦åŒ–é¥æµ‹å€¼ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰          |
| 3        | 9      | M_ME_NA_1 | `MeasuredValueNormalInfo`                    | è§„ä¸€åŒ–é¥æµ‹å€¼ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                  |
| 3        | 10     | M_ME_TA_1 | `MeasuredValueNormalInfo`                    | è§„ä¸€åŒ–é¥æµ‹å€¼ï¼ˆå¸¦æ—¶æ ‡ï¼‰                   |
| 3        | 34     | M_ME_TD_1 | `MeasuredValueNormalInfo`                    | è§„ä¸€åŒ–é¥æµ‹å€¼ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰          |
| 3        | 21     | M_ME_ND_1 | `MeasuredValueNormalInfo`                    | æ— å“è´¨æè¿°çš„è§„ä¸€åŒ–é¥æµ‹å€¼                  |
| 4        | 5      | M_ST_NA_1 | `StepPositionInfo`                           | æ­¥ä½ç½®ä¿¡æ¯ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                   |
| 4        | 6      | M_ST_TA_1 | `StepPositionInfo`                           | æ­¥ä½ç½®ä¿¡æ¯ï¼ˆå¸¦æ—¶æ ‡ï¼‰                    |
| 4        | 32     | M_ST_TB_1 | `StepPositionInfo`                           | æ­¥ä½ç½®ä¿¡æ¯ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰           |
| 5        | 7      | M_BO_NA_1 | `BitString32Info`                            | 32ä½æ¯”ç‰¹ä¸²ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                  |
| 5        | 8      | M_BO_TA_1 | `BitString32Info`                            | 32ä½æ¯”ç‰¹ä¸²ï¼ˆå¸¦æ—¶æ ‡ï¼‰                   |
| 5        | 33     | M_BO_TB_1 | `BitString32Info`                            | 32ä½æ¯”ç‰¹ä¸²ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰          |
| 6        | 13     | M_ME_NC_1 | `MeasuredValueFloatInfo`                     | çŸ­æµ®ç‚¹æ•°é¥æµ‹å€¼ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                 |
| 6        | 14     | M_ME_TC_1 | `MeasuredValueFloatInfo`                     | çŸ­æµ®ç‚¹æ•°é¥æµ‹å€¼ï¼ˆå¸¦æ—¶æ ‡ï¼‰                  |
| 6        | 36     | M_ME_TF_1 | `MeasuredValueFloatInfo`                     | çŸ­æµ®ç‚¹æ•°é¥æµ‹å€¼ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰         |
| 7        | 15     | M_IT_NA_1 | `BinaryCounterReadingInfo`                   | ç´¯è®¡é‡ï¼ˆä¸å¸¦æ—¶æ ‡ï¼‰                     |
| 7        | 16     | M_IT_TA_1 | `BinaryCounterReadingInfo`                   | ç´¯è®¡é‡ï¼ˆå¸¦æ—¶æ ‡ï¼‰                      |
| 7        | 37     | M_IT_TB_1 | `BinaryCounterReadingInfo`                   | ç´¯è®¡é‡ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰             |
| 8        | 17     | M_EP_TA_1 | `EventOfProtectionEquipmentInfo`             | ç»§ç”µä¿æŠ¤äº‹ä»¶ï¼ˆå¸¦æ—¶æ ‡ï¼‰                   |
| 8        | 38     | M_EP_TD_1 | `EventOfProtectionEquipmentInfo`             | ç»§ç”µä¿æŠ¤äº‹ä»¶ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰          |
| 9        | 18     | M_EP_TB_1 | `PackedStartEventsOfProtectionEquipmentInfo` | ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„å¯åŠ¨äº‹ä»¶ï¼ˆå¸¦æ—¶æ ‡ï¼‰            |
| 9        | 39     | M_EP_TE_1 | `PackedStartEventsOfProtectionEquipmentInfo` | ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„å¯åŠ¨äº‹ä»¶ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰   |
| 10       | 19     | M_EP_TC_1 | `PackedOutputCircuitInfoInfo`                | ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„è¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆå¸¦æ—¶æ ‡ï¼‰          |
| 10       | 40     | M_EP_TF_1 | `PackedOutputCircuitInfoInfo`                | ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„è¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆCP56Time2aæ—¶æ ‡ï¼‰ |
| 11       | 20     | M_PS_NA_1 | `PackedSinglePointWithSCDInfo`               | å¸¦å˜ä½æ£€å‡ºçš„æˆç»„å•ç‚¹ä¿¡æ¯                  |
| 19       | 0      |           | `UNKNOWN`                                    | UNKNOWN ä¸å‘é€                   |

---

## 3. ä¿¡æ¯ä½“ç»“æ„è¯¦è§£

### 3.1 å•ç‚¹ä¿¡æ¯ï¼ˆSinglePointInfoï¼‰

```json
{
  "ioa": 2001,
  "value": true,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                     |
|---------|--------|----------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value   | bool   | `true`=åˆ/åŠ¨ä½œ,`false`=åˆ†/æœªåŠ¨ä½œ              |
| qds     | byte   | å“è´¨                                     |
| qdsDesc | string | å“è´¨æè¿°                                   |
| ov      | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.2 åŒç‚¹ä¿¡æ¯ï¼ˆDoublePointInfoï¼‰

```json
{
  "ioa": 2002,
  "value": 0,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                     |
|---------|--------|----------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value   | byte   | `0`=ä¸ç¡®å®šæˆ–ä¸­é—´çŠ¶æ€,`1`=å¼€,`2`=åˆ,`3`=ä¸ç¡®å®š       |
| qds     | byte   | å“è´¨                                     |
| qdsDesc | string | å“è´¨æè¿°                                   |
| ov      | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.3 æ­¥ä½ç½®ä¿¡æ¯ï¼ˆStepPositionInfoï¼‰

```json
{
  "ioa": 3001,
  "value": {
    "val": 63,
    "hasTransient": false
  },
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ             | ç±»å‹     | è¯´æ˜                                     |
|----------------|--------|----------------------------------------|
| ioa            | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value          | object | æ­¥ä½ç½®å€¼å¯¹è±¡                                 |
| â”œ val          | int    | æ­¥ä½ç½®å€¼ï¼ˆèŒƒå›´ï¼š`-64` è‡³ `63`ï¼‰                  |
| â”œ hasTransient | bool   | `true`=è®¾å¤‡å¤„äºç¬å˜çŠ¶æ€                        |
| qds            | byte   | å“è´¨                                     |
| qdsDesc        | string | å“è´¨æè¿°                                   |
| ov             | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl             | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb             | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt             | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv             | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time           | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.4 è§„ä¸€åŒ–é¥æµ‹å€¼ï¼ˆMeasuredValueNormalInfoï¼‰

```json
{
  "ioa": 4001,
  "value": 16384,
  "nva": 0.7355652,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹      | è¯´æ˜                                       |
|---------|---------|------------------------------------------|
| ioa     | uint    | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰   |
| value   | int16   | åŸå§‹å½’ä¸€åŒ–å€¼ï¼ˆèŒƒå›´ï¼š`-32768` è‡³ `32767`ï¼Œéœ€æŒ‰å…¬å¼è½¬æ¢ä¸ºå·¥ç¨‹å€¼ï¼‰ |
| nva     | float32 | è§„ä¸€åŒ–å€¼ é»˜è®¤å…¬å¼ få½’ä¸€= 32768 * fçœŸå® / æ»¡ç å€¼         |
| qds     | byte    | å“è´¨                                       |
| qdsDesc | string  | å“è´¨æè¿°                                     |
| ov      | bool    | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º           |
| bl      | bool    | Blocked `true`=é—­é”,`false`=æœªé—­é”            |
| sb      | bool    | Substituted `true`=å–ä»£,`false`=æœªå–ä»£        |
| nt      | bool    | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼       |
| iv      | bool    | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ             |
| time    | string  | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                     |

---

### 3.5 æ ‡åº¦åŒ–é¥æµ‹å€¼ï¼ˆMeasuredValueScaledInfoï¼‰

```json
{
  "ioa": 4001,
  "value": 16384,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                     |
|---------|--------|----------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value   | int16  | æ ‡åº¦åŒ–å€¼                                   |
| qds     | byte   | å“è´¨                                     |
| qdsDesc | string | å“è´¨æè¿°                                   |
| ov      | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.6 æ¯”ç‰¹ä½ä¸²ä¿¡æ¯ï¼ˆBitString32Infoï¼‰

```json
{
  "ioa": 4002,
  "value": 220,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                     |
|---------|--------|----------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value   | uint32 | 32 ä¸ªç‹¬ç«‹è®¾å¤‡çŠ¶æ€ï¼ˆå¦‚å¼€å…³ã€ä¼ æ„Ÿå™¨ã€ç»§ç”µå™¨ï¼‰ï¼Œæ¯ä¸ªæ¯”ç‰¹ä½å¯¹åº”ä¸€ä¸ªè®¾å¤‡    |
| qds     | byte   | å“è´¨                                     |
| qdsDesc | string | å“è´¨æè¿°                                   |
| ov      | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

---

### 3.7 çŸ­æµ®ç‚¹æ•°é¥æµ‹å€¼ï¼ˆMeasuredValueFloatInfoï¼‰

```json
{
  "ioa": 4002,
  "value": 220.5,
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹      | è¯´æ˜                                     |
|---------|---------|----------------------------------------|
| ioa     | uint    | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value   | float32 | çŸ­æµ®ç‚¹æ•°å€¼ï¼ˆç›´æ¥ä¸ºå·¥ç¨‹å€¼ï¼Œå¦‚ç”µå‹ã€ç”µæµç­‰ï¼‰                  |
| qds     | byte    | å“è´¨                                     |
| qdsDesc | string  | å“è´¨æè¿°                                   |
| ov      | bool    | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool    | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool    | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool    | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool    | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |
| time    | string  | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.8 ç´¯è®¡é‡ï¼ˆBinaryCounterReadingInfoï¼‰

```json
{
  "ioa": 5001,
  "value": {
    "counterReading": 1000,
    "seqNumber": 5,
    "hasCarry": false,
    "isAdjusted": false,
    "isInvalid": false
  },
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ               | ç±»å‹     | è¯´æ˜                                     |
|------------------|--------|----------------------------------------|
| ioa              | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| value            | object | ç´¯è®¡é‡ä¿¡æ¯                                  |
| â”œ counterReading | int32  | è®¡æ•°å™¨è¯»æ•°ï¼ˆ32ä½æœ‰ç¬¦å·æ•´æ•°ï¼‰                        |
| â”œ seqNumber      | byte   | é¡ºåºå·ï¼ˆèŒƒå›´ï¼š`0`-`31`ï¼‰                       |
| â”œ hasCarry       | bool   | `true`=è®¡æ•°å™¨æº¢å‡º                           |
| â”œ isAdjusted     | bool   | `true`=è®¡æ•°é‡è¢«äººå·¥è°ƒæ•´                        |
| â”œ isInvalid      | bool   | `true`=æ•°æ®æ— æ•ˆ                            |
| time             | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                   |

---

### 3.9 ç»§ç”µä¿æŠ¤äº‹ä»¶ï¼ˆEventOfProtectionEquipmentInfoï¼‰

```json
{
  "ioa": 6001,
  "event": 1,
  "qdp": 145,
  "qdpDesc": "QDP(10010001)[Blocked|Invalid]",
  "ei": false,
  "bl": true,
  "sb": false,
  "nt": false,
  "iv": true,
  "msec": 500,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                              |
|---------|--------|-------------------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰          |
| event   | byte   | äº‹ä»¶ç±»å‹ï¼ˆè§é™„å½•Bï¼‰                                      |
| qdp     | byte   | ä¿æŠ¤äº‹ä»¶å“è´¨ï¼ˆè§é™„å½•Aï¼‰                                    |
| qdpDesc | string | ä¿æŠ¤äº‹ä»¶å“è´¨æè¿°                                        |
| ei      | bool   | ElapsedTimeInvalid `true`=åŠ¨ä½œæ—¶é—´æ— æ•ˆ,`false`=åŠ¨ä½œæ—¶é—´æœ‰æ•ˆ |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”                   |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£               |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼              |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ                    |
| msec    | uint16 | äº‹ä»¶å‘ç”Ÿçš„æ¯«ç§’æ—¶é—´æˆ³ï¼ˆèŒƒå›´ï¼š`0`-`59999`ï¼‰                      |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                            |

---

---

### 3.10 ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„å¯åŠ¨äº‹ä»¶ï¼ˆPackedStartEventsOfProtectionEquipmentInfoï¼‰

```json
{
  "ioa": 6001,
  "event": 32,
  "qdp": 145,
  "qdpDesc": "QDP(10010001)[Blocked|Invalid]",
  "ei": false,
  "bl": true,
  "sb": false,
  "nt": false,
  "iv": true,
  "msec": 500,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                              |
|---------|--------|-------------------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰          |
| event   | byte   | äº‹ä»¶ç±»å‹ï¼ˆè§é™„å½•Cï¼‰                                      |
| qdp     | byte   | ä¿æŠ¤äº‹ä»¶å“è´¨ï¼ˆè§é™„å½•Aï¼‰                                    |
| qdpDesc | string | ä¿æŠ¤äº‹ä»¶å“è´¨æè¿°                                        |
| ei      | bool   | ElapsedTimeInvalid `true`=åŠ¨ä½œæ—¶é—´æ— æ•ˆ,`false`=åŠ¨ä½œæ—¶é—´æœ‰æ•ˆ |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”                   |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£               |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼              |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ                    |
| msec    | uint16 | äº‹ä»¶å‘ç”Ÿçš„æ¯«ç§’æ—¶é—´æˆ³ï¼ˆèŒƒå›´ï¼š`0`-`59999`ï¼‰                      |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                            |

---

---

### 3.11 ç»§ç”µå™¨ä¿æŠ¤è®¾å¤‡æˆç»„è¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆPackedOutputCircuitInfoInfoï¼‰

```json
{
  "ioa": 6001,
  "oci": 10,
  "gc": false,
  "cl1": true,
  "cl2": false,
  "cl3": true,
  "qdp": 145,
  "qdpDesc": "QDP(10010001)[Blocked|Invalid]",
  "ei": false,
  "bl": true,
  "sb": false,
  "nt": false,
  "iv": true,
  "msec": 500,
  "time": "2023-10-01 14:30:00.000000"
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                              |
|---------|--------|-------------------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰          |
| oci     | byte   | è¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆè§é™„å½•Cï¼‰                                    |
| gc      | bool   | `true`=æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯,`false`=æ— æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯           |
| cl1     | bool   | `true`=å‘½ä»¤è¾“å‡ºè‡³Aç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Aç›¸è¾“å‡ºç”µè·¯         |
| cl2     | bool   | `true`=å‘½ä»¤è¾“å‡ºè‡³Bç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Bç›¸è¾“å‡ºç”µè·¯         |
| cl3     | bool   | `true`=å‘½ä»¤è¾“å‡ºè‡³Cç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Cç›¸è¾“å‡ºç”µè·¯         |
| qdp     | byte   | ä¿æŠ¤äº‹ä»¶å“è´¨ï¼ˆè§é™„å½•Aï¼‰                                    |
| qdpDesc | string | ä¿æŠ¤äº‹ä»¶å“è´¨æè¿°                                        |
| ei      | bool   | ElapsedTimeInvalid `true`=åŠ¨ä½œæ—¶é—´æ— æ•ˆ,`false`=åŠ¨ä½œæ—¶é—´æœ‰æ•ˆ |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”                   |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£               |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼              |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ                    |
| msec    | uint16 | äº‹ä»¶å‘ç”Ÿçš„æ¯«ç§’æ—¶é—´æˆ³ï¼ˆèŒƒå›´ï¼š`0`-`59999`ï¼‰                      |
| time    | string | æ—¶æ ‡ï¼ˆä»…å¸¦æ—¶æ ‡çš„ASDUç±»å‹åŒ…å«æ­¤å­—æ®µï¼‰                            |

---

---

### 3.12 å¸¦å˜ä½æ£€å‡ºçš„æˆç»„å•ç‚¹ä¿¡æ¯ï¼ˆPackedSinglePointWithSCDInfoï¼‰

```json
{
  "ioa": 6001,
  "scd": 0,
  "stn": "0000000000000000",
  "cdn": "0000000000000000",
  "qds": 160,
  "qdsDesc": "QDS(10100000)[Substituted|Invalid]",
  "ov": false,
  "bl": false,
  "sb": true,
  "nt": false,
  "iv": true
}
```

| å­—æ®µ      | ç±»å‹     | è¯´æ˜                                     |
|---------|--------|----------------------------------------|
| ioa     | uint   | ä¿¡æ¯å¯¹è±¡åœ°å€ï¼ˆèŒƒå›´ï¼š`0x000001`-`0xFFFFFF`ï¼Œåè¿›åˆ¶æ˜¾ç¤ºï¼‰ |
| scd     | byte   | çŠ¶æ€å˜ä½æ£€å‡ºï¼ˆè§é™„å½•Fï¼‰                           |
| qds     | byte   | å“è´¨                                     |
| qdsDesc | string | å“è´¨æè¿°                                   |
| ov      | bool   | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º         |
| bl      | bool   | Blocked `true`=é—­é”,`false`=æœªé—­é”          |
| sb      | bool   | Substituted `true`=å–ä»£,`false`=æœªå–ä»£      |
| nt      | bool   | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼     |
| iv      | bool   | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ           |

---

## 4. é™„å½•

### é™„å½•Aï¼šå“è´¨æè¿°ï¼ˆQDS/QDPï¼‰

#### 1. QDS

| å­—æ®µ | ä½å· | è¯´æ˜                                 |
|----|----|------------------------------------|
| ov | 1  | Overflow `true`=æº¢å‡º,`false`=æœªæº¢å‡º     |
| bl | 5  | Blocked `true`=é—­é”,`false`=æœªé—­é”      |
| sb | 6  | Substituted `true`=å–ä»£,`false`=æœªå–ä»£  |
| nt | 7  | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼ |
| iv | 8  | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ       |

#### 1.QDP

| å­—æ®µ | ä½å· | è¯´æ˜                                              |
|----|----|-------------------------------------------------|
| ei | 4  | ElapsedTimeInvalid `true`=åŠ¨ä½œæ—¶é—´æ— æ•ˆ,`false`=åŠ¨ä½œæ—¶é—´æœ‰æ•ˆ |
| bl | 5  | Blocked `true`=é—­é”,`false`=æœªé—­é”                   |
| sb | 6  | Substituted `true`=å–ä»£,`false`=æœªå–ä»£               |
| nt | 7  | NotTopical `true`=éå½“å‰å€¼,`false`=å½“å‰å€¼              |
| iv | 8  | Invalid `true`=æ— æ•ˆ,`false`=æœ‰æ•ˆ                    |

### é™„å½•Bï¼šç»§ç”µä¿æŠ¤äº‹ä»¶ç±»å‹

| å€¼ | äº‹ä»¶ç±»å‹     |
|---|----------|
| 0 | ä¸ç¡®å®šæˆ–ä¸­é—´çŠ¶æ€ |
| 1 | å¼€        |
| 2 | åˆ        |
| 3 | ä¸ç¡®å®š      |

### é™„å½•Cï¼šç»§ç”µä¿æŠ¤äº‹ä»¶ç±»å‹

#### 1. å­—æ®µå®šä¹‰

| å­—æ®µå | ç±»å‹   | ä½å®½ | æè¿°                                     |
|:----|:-----|:---|:---------------------------------------|
| oci | byte | 8ä½ | 8ä½æ¯”ç‰¹æ©ç ï¼Œæ¯ä¸€ä½è¡¨ç¤ºä¸€ä¸ªè¾“å‡ºç”µè·¯çš„çŠ¶æ€ï¼ˆ`1`=å¯åŠ¨,`0`=æœªå¯åŠ¨ï¼‰ã€‚ |

#### 2. æ¯”ç‰¹ä½æ˜ å°„è§„åˆ™

| å­—æ®µ  | ä½å· | è¯´æ˜                                      |
|-----|----|-----------------------------------------|
| gc  | 1  | `true`=æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯,`false`=æ— æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯   |
| cl1 | 2  | `true`=å‘½ä»¤è¾“å‡ºè‡³Aç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Aç›¸è¾“å‡ºç”µè·¯ |
| cl2 | 3  | `true`=å‘½ä»¤è¾“å‡ºè‡³Bç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Bç›¸è¾“å‡ºç”µè·¯ |
| cl3 | 4  | `true`=å‘½ä»¤è¾“å‡ºè‡³Cç›¸è¾“å‡ºç”µè·¯,`false`=æ— å‘½ä»¤è¾“å‡ºè‡³Cç›¸è¾“å‡ºç”µè·¯ |

### é™„å½•Dï¼šå…¬å…±åœ°å€ï¼ˆCOAï¼‰è§„åˆ™

- **èŒƒå›´**ï¼š`1`-`65534`ï¼ˆ`65535`ä¸ºå…¨å±€å¹¿æ’­åœ°å€ï¼‰
- **ç”¨é€”**ï¼šæ ‡è¯†RTUã€å­ç«™æˆ–å­ç³»ç»Ÿ

### é™„å½•Eï¼šè¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆOCIï¼‰å®šä¹‰

**æ¦‚è¿°**  
æœ¬é™„å½•å®šä¹‰äº†è¾“å‡ºç”µè·¯ä¿¡æ¯ï¼ˆOCIï¼‰çš„å­—æ®µã€æ¯”ç‰¹ä½æ˜ å°„è§„åˆ™åŠç¤ºä¾‹è§£æã€‚

#### 1. å­—æ®µå®šä¹‰

| å­—æ®µå   | ç±»å‹     | ä½å®½ | æè¿°                                                     |
|:------|:-------|:---|:-------------------------------------------------------|
| `oci` | `byte` | 8ä½ | 8ä½æ¯”ç‰¹æ©ç ï¼Œæ¯ä¸€ä½è¡¨ç¤ºä¸€ä¸ªè¾“å‡ºç”µè·¯çš„çŠ¶æ€ï¼ˆ`1`=æ— æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯,`0`=æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯ï¼‰ã€‚ |

#### 2. æ¯”ç‰¹ä½æ˜ å°„è§„åˆ™

| å€¼ | ç±»å‹                | æè¿°             |
|---|-------------------|----------------|
| 1 | OCIGeneralCommand | æ€»å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯     |
| 2 | OCICommandL1      | A ç›¸ä¿æŠ¤å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯ |
| 4 | OCICommandL2      | B ç›¸ä¿æŠ¤å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯ |
| 8 | OCICommandL3      | C ç›¸ä¿æŠ¤å‘½ä»¤è¾“å‡ºè‡³è¾“å‡ºç”µè·¯ |

### é™„å½•Fï¼šçŠ¶æ€å˜ä½æ£€å‡ºï¼ˆSCDï¼‰å®šä¹‰

**æ¦‚è¿°**
æœ¬é™„å½•å®šä¹‰äº†çŠ¶æ€å˜ä½æ£€å‡ºï¼ˆSCDï¼‰çš„å­—æ®µã€æ¯”ç‰¹ä½ç»“æ„åŠç¤ºä¾‹è§£æã€‚

#### 1. å­—æ®µå®šä¹‰

| å­—æ®µå   | ç±»å‹       | ä½å®½  | æè¿°                                    |
|-------|----------|-----|---------------------------------------|
| `scd` | `uint32` | 32ä½ | 32ä½æ¯”ç‰¹æ©ç ï¼Œä½16ä½è¡¨ç¤ºå½“å‰çŠ¶æ€ï¼Œé«˜16ä½è¡¨ç¤ºå˜ä½æ£€å‡ºï¼ˆ=çŠ¶æ€å˜åŒ–ï¼‰ã€‚ |

#### 2. æ¯”ç‰¹ä½ç»“æ„

| ä½åŸŸ        | è¯´æ˜                    |
|-----------|-----------------------|
| ä½0 ~ ä½15  | å½“å‰çŠ¶æ€ï¼ˆ16ä¸ªå•ç‚¹çŠ¶æ€ï¼‰ 0-å¼€ 1-åˆ |
| ä½16 ~ ä½31 | å˜ä½æ£€å‡ºï¼ˆå¯¹åº”ä½=1è¡¨ç¤ºå˜åŒ–ï¼‰       |

#### 3. ç¤ºä¾‹è§£æ

å‡è®¾ `scd = 0x0000FF0F`ï¼š

##### Go ç¤ºä¾‹ä»£ç ï¼š

``` go
package main

import (
	"fmt"
)

func main() {
	scd := uint32(0x0000FF0F) // åå…­è¿›åˆ¶å€¼

	currentStatus := scd & 0xFFFF
	statusChange := (scd >> 16) & 0xFFFF

	var activePoints []int
	var changedPoints []int

	for i := 0; i < 16; i++ {
		if currentStatus&(1<<i) != 0 {
			activePoints = append(activePoints, i)
		}
		if statusChange&(1<<i) != 0 {
			changedPoints = append(changedPoints, i)
		}
	}

	fmt.Println("å½“å‰é—­åˆçš„ä½:", activePoints)
	fmt.Println("çŠ¶æ€å˜åŒ–çš„ä½:", changedPoints)
	// è¾“å‡º:
	// å½“å‰é—­åˆçš„ä½: [0 1 2 3 8 9 10 11]
	// çŠ¶æ€å˜åŒ–çš„ä½: []
}
```

##### Java ç¤ºä¾‹ä»£ç ï¼š

``` java
public class Main {
    public static void main(String[] args) {
        int scd = 0x0000FF0F; // åå…­è¿›åˆ¶å€¼

        int currentStatus = scd & 0xFFFF;
        int statusChange = (scd >> 16) & 0xFFFF;

        StringBuilder activePoints = new StringBuilder();
        StringBuilder changedPoints = new StringBuilder();

        for (int i = 0; i < 16; i++) {
            if ((currentStatus & (1 << i)) != 0) {
                activePoints.append(i).append(" ");
            }
            if ((statusChange & (1 << i)) != 0) {
                changedPoints.append(i).append(" ");
            }
        }

        System.out.println("å½“å‰é—­åˆçš„ä½: " + activePoints.toString().trim());
        System.out.println("çŠ¶æ€å˜åŒ–çš„ä½: " + changedPoints.toString().trim());
        // è¾“å‡º:
        // å½“å‰é—­åˆçš„ä½: 0 1 2 3 8 9 10 11
        // çŠ¶æ€å˜åŒ–çš„ä½: 
    }
}
```

â€¢ è§£æç»“æœï¼šå½“å‰çŠ¶æ€ä¸­ï¼Œä½0-3å’Œä½8-11ä¸ºé—­åˆçŠ¶æ€ï¼Œæ— å˜ä½æ£€å‡ºã€‚

#### 4. ä½¿ç”¨åœºæ™¯

â€¢ é€‚ç”¨ASDUç±»å‹ï¼š`M_PS_NA_1`
â€¢ å…¸å‹åœºæ™¯ï¼šæ‰¹é‡ç›‘æµ‹å•ç‚¹çŠ¶æ€å˜åŒ–ï¼ˆå¦‚å¼€å…³é‡è¾“å…¥æ¨¡å—ï¼‰ã€‚

#### 5. æ³¨æ„äº‹é¡¹

â€¢ ä½16ä½å’Œé«˜16ä½ç‹¬ç«‹è§£æï¼Œå˜ä½æ£€å‡ºä»…åœ¨çŠ¶æ€å˜åŒ–æ—¶ç½®ä½ã€‚

### é™„å½•Gï¼šæšä¸¾å€¼æ±‡æ€»

> **è®¾è®¡åŸåˆ™**
> 1. çŠ¶æ€é‡ä¼˜å…ˆä½¿ç”¨é¥ä¿¡ï¼ˆYXï¼‰é€šé“ä¼ è¾“ï¼ˆé«˜æ•ˆã€å¯é ï¼‰
> 2. é¥æµ‹ï¼ˆYCï¼‰ä¸­`DIGITAL_STATUS`ä»…ç”¨äºå…¼å®¹æ—§ç³»ç»Ÿæˆ–ç‰¹æ®Šç¡¬ä»¶
> 3. å•ä½ç¬¦å·éµå¾ªIECå›½é™…æ ‡å‡†ï¼ˆé¿å…ä¸­è‹±æ–‡æ··ç”¨ï¼‰

---

#### ğŸ§ª é¥æµ‹å•ä½ï¼ˆYcUnitï¼‰

| æšä¸¾å€¼               | ä¸­æ–‡åç§°  | ç¬¦å·  | ç¤ºä¾‹ç”¨é€”    | è¡¥å……è¯´æ˜            |
|-------------------|-------|-----|---------|-----------------|
| VOLT              | äº¤æµç”µå‹  | V   | ç”µç½‘ç”µå‹    | æ ‡å‡†äº¤æµç³»ç»Ÿ380V/10kV |
| VOLTAGE_DC        | ç›´æµç”µå‹  | Vdc | ç”µæ± ç”µå‹    | å…‰ä¼/å‚¨èƒ½ç³»ç»Ÿä¸“ç”¨       |
| KILOVOLT          | åƒä¼    | kV  | é«˜å‹çº¿è·¯    | 35kV/110kVç­‰é«˜å‹ç³»ç»Ÿ |
| AMPERE            | ç”µæµ    | A   | è´Ÿè½½ç”µæµ    | äº¤ç›´æµç³»ç»Ÿå‡é€‚ç”¨        |
| WATT              | æœ‰åŠŸåŠŸç‡  | W   | ç¬æ—¶åŠŸç‡    | å•ç›¸è®¾å¤‡å¸¸ç”¨          |
| VOLT_AMP_REACTIVE | æ— åŠŸåŠŸç‡  | var | æ— åŠŸåŠŸç‡    | åŠŸç‡è¡¥å¿è£…ç½®          |
| KILOWATT          | åƒç“¦    | kW  | æœ‰åŠŸåŠŸç‡    | ä¸‰ç›¸è®¾å¤‡å¸¸ç”¨å•ä½        |
| KILOVOLT_AMP      | åƒä¼å®‰   | kVA | è§†åœ¨åŠŸç‡    | å˜å‹å™¨å®¹é‡è®¡ç®—         |
| HERTZ             | é¢‘ç‡    | Hz  | ç”µç½‘é¢‘ç‡    | ä¸­å›½50Hz/ç¾å›½60Hz   |
| DEGREE_CELSIUS    | æ‘„æ°æ¸©åº¦  | â„ƒ   | è®¾å¤‡æ¸©åº¦    | æ¸©æ§ç³»ç»Ÿä¸“ç”¨          |
| PERCENT           | ç™¾åˆ†æ¯”   | %   | è´Ÿè½½ç‡/SOC | ç”µæ± ç”µé‡æµ‹é‡          |
| POWER_FACTOR      | åŠŸç‡å› æ•°  | Î»   | åŠŸç‡å› æ•°    | èŒƒå›´0.8~1.0       |
| SECOND            | æ—¶é—´ï¼ˆç§’ï¼‰ | s   | çŠ¶æ€æŒç»­æ—¶é•¿  | å‘Šè­¦æŒç»­æ—¶é—´ç­‰         |
| DIGITAL_STATUS    | çŠ¶æ€æ˜ å°„å€¼ | 0/1 | éæ ‡è®¾å¤‡çŠ¶æ€  | **ä»…ç”¨äºå…¼å®¹æ—§ç³»ç»Ÿ**    |
| NONE              | æ— å•ä½   | -   | ç‰¹æ®Šé‡     | å ä½/è‡ªå®šä¹‰é‡         |

> ğŸ’¡ æ³¨ï¼šæ­£å¸¸æƒ…å†µä¸‹çŠ¶æ€é‡åº”ä½¿ç”¨YXä¼ è¾“ï¼Œ`DIGITAL_STATUS`ä»…ç”¨äºå…¼å®¹å†å²ç³»ç»Ÿ

---

#### ğŸ§® é¥è„‰å•ä½ï¼ˆYmUnitï¼‰

| æšä¸¾å€¼     | ä¸­æ–‡åç§°    | ç¬¦å·    | ç¤ºä¾‹ç”¨é€”   | è¡¥å……è¯´æ˜    |
|---------|---------|-------|--------|---------|
| KWH     | æœ‰åŠŸç”µèƒ½    | kWh   | æ­£å‘æœ‰åŠŸç”µåº¦ | ç”µè¡¨å¸¸ç”¨å•ä½  |
| KVARH   | æ— åŠŸç”µèƒ½    | kvarh | æ— åŠŸç”µåº¦   | åŠ›è°ƒç”µè´¹è®¡ç®—  |
| MWH     | å…†ç“¦æ—¶     | MWh   | å‘ç”µé‡ç»Ÿè®¡  | ç”µå‚æœˆåº¦æŠ¥è¡¨  |
| M3      | ç´¯è®¡ä½“ç§¯    | mÂ³    | ç‡ƒæ°”è¡¨/æ°´è¡¨ | æµé‡è®¡é‡ä»ªè¡¨  |
| LITER   | æ¶²ä½“ä½“ç§¯    | L     | æ¶²ä½“æµé‡   | å°å‹è®¡é‡è®¾å¤‡  |
| COUNTER | ç´¯è®¡æ¬¡æ•°    | cnt   | åŠ¨ä½œæ¬¡æ•°   | åˆé—¸/åˆ†é—¸æ¬¡æ•° |
| SECOND  | ç´¯è®¡æ—¶é—´ï¼ˆç§’ï¼‰ | s     | è¿è¡Œç§’æ•°   | è®¾å¤‡è¿è¡Œæ—¶é—´  |
| MINUTE  | ç´¯è®¡æ—¶é—´ï¼ˆåˆ†ï¼‰ | min   | åœæœºæ—¶é•¿   | ç»´æŠ¤åœæœºç»Ÿè®¡  |
| HOUR    | ç´¯è®¡æ—¶é—´ï¼ˆæ—¶ï¼‰ | h     | è®¾å¤‡è¿è¡Œå°æ—¶ | å¯¿å‘½è®¡ç®—ä¾æ®  |
| NONE    | æ— å•ä½     | -     | ç‰¹æ®Šè®¡é‡   | é¢„ç•™æ‰©å±•ä½   |

---

#### ğŸŸ¢ é¥ä¿¡å•ä½ï¼ˆYxUnitï¼‰

| æšä¸¾å€¼           | ä¸­æ–‡åç§°  | ç¬¦å·                 | ç¤ºä¾‹ç”¨é€”     | è¡¥å……è¯´æ˜         |
|---------------|-------|--------------------|----------|--------------|
| DOUBLE_POINT  | åŒç‚¹çŠ¶æ€  | 0=ä¸­é—´,1=å¼€,2=åˆ,3=ä¸ç¡®å®š | æ–­è·¯å™¨/éš”ç¦»å¼€å…³ | IEC 104æ ‡å‡†å››çŠ¶æ€ |
| SWITCH_STATUS | å•ç‚¹åˆ†åˆé—¸ | 0=åˆ†,1=åˆ            | æ™®é€šå¼€å…³è®¾å¤‡   | ç®€å•å¼€å…³ä¿¡å·       |
| GENERIC_BOOL  | é€šç”¨çŠ¶æ€  | 0=å…³,1=å¼€,2=æœªçŸ¥       | é€šç”¨è®¾å¤‡çŠ¶æ€   | ä¸‰æ€æ”¯æŒè´¨é‡åˆ¤æ–­     |
| ALARM_STATUS  | æŠ¥è­¦çŠ¶æ€  | 0=æ­£å¸¸,1=æŠ¥è­¦          | æ•…éšœä¿¡å·     | ä¼˜å…ˆçº§æœ€é«˜ä¿¡å·      |
| CONTROL_MODE  | æ§åˆ¶æƒé™  | 0=æœ¬åœ°,1=è¿œç¨‹          | æ“ä½œæ¨¡å¼     | æ§åˆ¶æƒåˆ‡æ¢æ ‡å¿—      |
| FAULT_STATUS  | æ•…éšœæ ‡å¿—  | 0=æ­£å¸¸,1=æ•…éšœ          | ç³»ç»Ÿçº§æ•…éšœ    | è®¾å¤‡å¼‚å¸¸çŠ¶æ€       |
| DOOR_STATUS   | é—¨ç¦çŠ¶æ€  | 0=å…³,1=å¼€            | æœºæŸœé—¨çŠ¶æ€    | å®‰å…¨é˜²æŠ¤ä¿¡å·       |
| COMMUNICATION | é€šä¿¡çŠ¶æ€  | 0=ç¦»çº¿,1=åœ¨çº¿          | é€šä¿¡é“¾è·¯     | è®¾å¤‡åœ¨çº¿ç›‘æµ‹       |
| NONE          | æ— å•ä½   | -                  | é¢„ç•™ä½      | æ‰©å±•å…¼å®¹ä½        |

---

## 5. æ•°æ®æ¶ˆè´¹æŒ‡å—

### 5.1 å”¯ä¸€é”®ç”Ÿæˆè§„åˆ™

```python
# æ ¼å¼ï¼šhost_coa_0x{ioa}
key = f"{host}_{coa}_0x{ioa:06X}"  # ç¤ºä¾‹ï¼š127.0.0.1_1_0x0007D1
```

### 5.2 æ—¶åŒºä¸æ—¶é—´å¤„ç†

- **æ—¶åŒº**ï¼šæ‰€æœ‰æ—¶é—´å­—æ®µä¸º **UTC+8** æ—¶åŒº
- **ç²¾åº¦**ï¼šå¾®ç§’çº§ï¼ˆå®é™…ç²¾åº¦ä¾èµ–è®¾å¤‡èƒ½åŠ›ï¼‰

### 5.3 å¼‚å¸¸æ•°æ®å¤„ç†

- **å“è´¨ä½æ£€æŸ¥**ï¼šæ ‡è®° `IV`ï¼ˆæ— æ•ˆï¼‰ã€`OV`ï¼ˆæº¢å‡ºï¼‰æ•°æ®å¹¶å‘Šè­¦
- **ç´¯è®¡é‡å¼‚å¸¸**ï¼šè®°å½• `isAdjusted`ï¼ˆäººå·¥è°ƒæ•´ï¼‰å’Œ `hasCarry`ï¼ˆæº¢å‡ºï¼‰æ—¥å¿—

---

## 6. æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0.0ï¼ˆ2025-06-12ï¼‰
- **åè®®ç‰ˆæœ¬**ï¼šIEC 104
- **è”ç³»æ”¯æŒ**ï¼š[hehanpengyy@163.com](mailto:hehanpengyy@163.com)

---

> âš ï¸ **æ³¨æ„**ï¼šå®é™…è§£ææ—¶éœ€ä¸¥æ ¼å‚ç…§è®¾å¤‡ç‚¹è¡¨å®šä¹‰ï¼Œéƒ¨åˆ†å­—æ®µï¼ˆå¦‚åŒç‚¹ä¿¡æ¯çš„valueï¼‰çš„å…·ä½“å«ä¹‰å¯èƒ½å› è®¾å¤‡è€Œå¼‚ã€‚
>
> âš ï¸ **æ³¨æ„**ï¼šä»£ç éœ€è¦æµ‹è¯•,å­˜åœ¨ä¸€äº›å­—èŠ‚ç æ²¡æœ‰è§£æï¼Œéœ€è¦å†è§£æï¼ŒåŒæ—¶æ·»åŠ è¿› pb æ–‡ä»¶å®šä¹‰ä¸­
>
> âš ï¸ **æ³¨æ„**ï¼šieccaller.proto åŒ…å«å¸¸è§æ§åˆ¶æŒ‡ä»¤ï¼ˆæ€»å¬å”¤...ï¼‰,æ¥å…¥æ–¹å¼ Endpoints,Nacos