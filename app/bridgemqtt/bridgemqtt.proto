syntax = "proto3";

package bridgemqtt;
option go_package = "./bridgemqtt";
option java_multiple_files = true;
option java_package = "com.github.bridgemqtt.grpc";
option java_outer_classname = "BridgeMqttProto";

// Modbus 协议桥接服务
service BridgeMqtt {
  rpc Ping(Req) returns (Res);
  // 发布消息
  rpc Publish(PublishReq) returns (PublishRes);
  // 带 traceId 的发布消息 内部服务链路追踪
  rpc PublishWithTrace(PublishReq) returns (PublishRes);
}

// -------------------- 通用请求/响应 --------------------

message Req {
  string ping = 1; // 健康检查请求内容
}

message Res {
  string pong = 1; // 健康检查返回内容
}

message PublishReq {
  // 暂不考虑 session 区分下发
  // 发布消息的 topic
  string topic = 1;
  // 发布消息的 payload
  bytes payload = 2;
}

message PublishRes {
}